<!doctype html>
<html lang="vi">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tin T·ª©c - Trang Ch·ªß</title>
    <link rel="stylesheet" href="styles.css">
    
    <style>
        /* 1. CSS C·∫Øt ·∫£nh t·ªâ l·ªá 16:9 cho b√†i ch√≠nh */
        .main-article .image-wrap {
            width: 100%;
            padding-top: 56.25%; /* 16:9 */
            position: relative;
            overflow: hidden;
            border-radius: 6px;
            background: #eee;
        }

        .main-article .image-wrap img {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            object-fit: cover;
            display: block;
        }

        /* 2. CSS Cho Grid 4 √¥ Chuy√™n m·ª•c */
        .category-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr); /* 4 c·ªôt */
            gap: 15px;
            margin-top: 20px;
            margin-bottom: 40px;
        }

        .cat-box {
            position: relative;
            display: block;
            border-radius: 8px;
            overflow: hidden;
            aspect-ratio: 1/1; /* H√¨nh vu√¥ng */
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .cat-box img {
            width: 100%; height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .cat-box:hover img {
            transform: scale(1.1); /* Ph√≥ng to khi di chu·ªôt */
        }

        .cat-overlay {
            position: absolute;
            bottom: 0; left: 0; width: 100%;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            padding: 15px 10px;
            text-align: center;
        }

        .cat-overlay h3 {
            color: #fff; margin: 0;
            font-size: 16px; text-transform: uppercase;
            font-weight: bold; text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        /* Mobile: Chuy·ªÉn th√†nh 2 c·ªôt */
        @media (max-width: 768px) {
            .category-grid { grid-template-columns: repeat(2, 1fr); }
        }
        
        /* M√†u active cho menu */
        .category-bar a.active {
            color: #d32f2f; /* M√†u ƒë·ªè */
            font-weight: bold;
            border-bottom: 2px solid #d32f2f;
        }
    </style>
</head>

<body>
    <header class="site-header">
        <div class="container">
            <div class="logo">NH·ªäP S·ªêNG HU·∫æ</div>
            <nav class="main-nav">
                <form id="searchForm" class="search-form">
                    <input id="siteSearch" type="search" placeholder="T√¨m b√†i vi·∫øt" aria-label="T√¨m b√†i vi·∫øt">
                    <button type="submit">T√¨m</button>
                    <button type="button" id="clearSearch" title="X√≥a">X</button>
                </form>
            </nav>
        </div>
    </header>

    <div class="top-row">
        <nav class="category-bar">
            <div class="container">
                <a href="index.html?cat=all" data-cat="all" class="home-icon">T·∫•t c·∫£</a>
                <a href="index.html?cat=th·ªùi s·ª±" data-cat="th·ªùi s·ª±">Th·ªùi s·ª±</a>
                <a href="index.html?cat=x√£ h·ªôi" data-cat="x√£ h·ªôi">X√£ h·ªôi</a>
                <a href="index.html?cat=kinh t·∫ø" data-cat="kinh t·∫ø">Kinh t·∫ø</a>
                <a href="index.html?cat=ƒë·ªùi s·ªëng" data-cat="ƒë·ªùi s·ªëng">ƒê·ªùi s·ªëng</a>
                <a href="index.html?cat=s·ª©c kh·ªèe" data-cat="s·ª©c kh·ªèe">S·ª©c kh·ªèe</a>
                <a href="index.html?cat=du l·ªãch" data-cat="du l·ªãch">Du l·ªãch</a>
                <a href="index.html?cat=vƒÉn h√≥a" data-cat="vƒÉn h√≥a">VƒÉn h√≥a</a>
                <a href="index.html?cat=gi·∫£i tr√≠" data-cat="gi·∫£i tr√≠">Gi·∫£i tr√≠</a>
            </div>
        </nav>
    </div>

    <section class="hero-wrap">
        <div class="container">
            <div id="heroCarousel" class="hero-carousel">
                </div>
        </div>
    </section>

    <main class="container layout">
        <section class="content">
            <div class="container">
                <main class="main-content">
                    <div class="featured-news">
                        <div class="main-article" data-id="1">
                            <img src="" alt="Tin ch√≠nh">
                            <a class="article-link" href="#" aria-label="ƒê·ªçc b√†i ch√≠nh">
                                <div class="image-wrap"></div>
                            </a>
                            <div class="article-info">
                                <h2><a class="article-link" href="#"></a></h2>
                                <p></p>
                            </div>
                        </div>

                        <div class="sub-articles">
                            <div class="sub-item" data-id="2">
                                <h3><a href="#"></a></h3>
                                <p></p>
                            </div>
                            <div class="sub-item" data-id="3">
                                <h3><a href="#"></a></h3>
                                <p></p>
                            </div>
                            <div class="sub-item" data-id="4">
                                <h3><a href="#"></a></h3>
                                <p></p>
                            </div>
                        </div>
                    </div>
                </main>
            </div>

            <section class="cat-grid-section">
                <h2 class="section-title" style="margin-top: 30px; border-bottom: 2px solid #eee; padding-bottom: 10px;">Chuy√™n M·ª•c N·ªïi B·∫≠t</h2>
                <div id="categoryGrid" class="category-grid">
                    </div>
            </section>

            <h2 class="section-title">Ti√™u ƒëi·ªÉm</h2>
            <div id="articles" class="article-list"></div>
        </section>

        <aside class="sidebar">
            <div class="widget">
                <h3>Tin m·ªõi</h3>
                <ul id="latest" class="latest-list"></ul>
            </div>
        </aside>
    </main>

    <footer class="site-footer">
        <div class="container">
           <p>NH·ªäP S·ªêNG HU·∫æ ONLINE</p>

            <p>C∆° quan ch·ªß qu·∫£n: S·ªü Du l·ªãch Th√†nh ph·ªë Hu·∫ø</p>

            <p>üìç ƒê·ªãa ch·ªâ tr·ª• s·ªü c∆° quan ch·ªß qu·∫£n: T·∫ßng 4, T√≤a nh√† 4 t·∫ßng ‚Äì Khu h√†nh ch√≠nh c√¥ng, ƒë∆∞·ªùng V√µ Nguy√™n Gi√°p, ph∆∞·ªùng Xu√¢n Ph√∫, th√†nh ph·ªë Hu·∫ø, t·ªânh Th·ª´a Thi√™n Hu·∫ø, Vi·ªát Nam</p>

            <p>üìû ƒêi·ªán tho·∫°i t√≤a so·∫°n: 0xxx.xxx.xxx</p>

            <p>üìß Email: nhipsonghue@gmail.com</p>

            <p>üåê Website: www.nhipsonghue.vn</p>

            <p>¬© 2025 Nh·ªãp S·ªëng Hu·∫ø.</p>

            <p>M·ªçi quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u theo ph√°p lu·∫≠t Vi·ªát Nam.</p>

            <p>Nghi√™m c·∫•m sao ch√©p, tr√≠ch d·∫´n khi ch∆∞a ƒë∆∞·ª£c s·ª± cho ph√©p b·∫±ng vƒÉn b·∫£n c·ªßa t√≤a so·∫°n.</p>
        </div>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", function() {

            // --- 1. CONFIG & RESET VERSION ---
            // ƒê√£ ƒë·ªïi l√™n 1.4 ƒë·ªÉ √©p m√°y ng∆∞·ªùi d√πng x√≥a cache c≈© l·∫•y code m·ªõi
            const CURRENT_VERSION = '1.4'; 
            if (localStorage.getItem('data_version') !== CURRENT_VERSION) {
                localStorage.removeItem('articles');
                localStorage.setItem('data_version', CURRENT_VERSION);
                location.reload();
                return;
            }

            // --- 2. L·∫§Y D·ªÆ LI·ªÜU G·ªêC (RAW DATA) ---
            let fullList = []; // Kho ch·ª©a TO√ÄN B·ªò d·ªØ li·ªáu
            try {
                const local = JSON.parse(localStorage.getItem('articles') || '[]');
                if (Array.isArray(local) && local.length > 0) fullList = local;
            } catch (e) {}

            if (fullList.length === 0) {
                if (typeof window.SAMPLE_ARTICLES !== 'undefined') fullList = window.SAMPLE_ARTICLES;
                else if (typeof FALLBACK_DATA !== 'undefined') fullList = FALLBACK_DATA;
            }

            // --- 3. THU·∫¨T TO√ÅN L·ªåC TIN B√ÄI ---
            const urlParams = new URLSearchParams(window.location.search);
            const currentCat = urlParams.get('cat');
            const normalize = (str) => str ? str.toLowerCase().trim() : '';
            const targetCat = normalize(currentCat);

            // T·∫°o danh s√°ch hi·ªÉn th·ªã (Filtered List)
            let displayList = [];
            if (!targetCat || targetCat === 'all') {
                displayList = fullList; // L·∫•y h·∫øt
            } else {
                displayList = fullList.filter(item => normalize(item.category) === targetCat); // L·ªçc
            }
            displayList.sort((a, b) => b.id - a.id); // S·∫Øp x·∫øp m·ªõi nh·∫•t


            // --- 4. RENDER GIAO DI·ªÜN CH√çNH ---
            
            // 4.1. Active Menu
            const menuLinks = document.querySelectorAll('.category-bar a');
            menuLinks.forEach(link => {
                const linkCat = normalize(link.getAttribute('data-cat'));
                if (targetCat === linkCat || (!targetCat && linkCat === 'all')) {
                    link.classList.add('active');
                } else {
                    link.classList.remove('active');
                }
            });

            // 4.2. Render Tin Ch√≠nh & Tin Ph·ª•
            const contentSection = document.querySelector('.main-content');
            
            if (displayList.length === 0) {
                // Kh√¥ng c√≥ b√†i n√†o
                document.querySelector('.featured-news').style.display = 'none';
                document.getElementById('articles').innerHTML = `<p style="padding:20px">Kh√¥ng t√¨m th·∫•y b√†i vi·∫øt n√†o.</p>`;
            } else {
                // Tin Ch√≠nh (B√†i ƒë·∫ßu ti√™n)
                const latestPost = displayList[0];
                const main = document.querySelector('.main-article');
                if (main && latestPost) {
                    const img = main.querySelector('img');
                    if(img) img.src = latestPost.image || 'https://placehold.co/800x450';
                    
                    const title = main.querySelector('.article-info h2 a');
                    if(title) { title.textContent = latestPost.title; title.href = `post.html?id=${latestPost.id}`; }
                    
                    const desc = main.querySelector('.article-info p');
                    if(desc) desc.textContent = latestPost.excerpt;

                    const mainLink = main.querySelector('a.article-link');
                    if(mainLink) mainLink.href = `post.html?id=${latestPost.id}`;
                }

                // Tin Ph·ª• (3 b√†i ti·∫øp theo)
                const subItems = document.querySelectorAll('.sub-item');
                subItems.forEach((el, index) => {
                    const subData = displayList[index + 1];
                    if (subData) {
                        el.style.display = 'block';
                        const title = el.querySelector('h3 a');
                        if(title) { title.textContent = subData.title; title.href = `post.html?id=${subData.id}`; }
                        const p = el.querySelector('p');
                        if(p) p.textContent = subData.excerpt;
                    } else {
                        el.style.display = 'none';
                    }
                });

                // List tin b√™n d∆∞·ªõi (T·ª´ b√†i th·ª© 5 tr·ªü ƒëi)
                const listContainer = document.getElementById('articles');
                if(listContainer) {
                    listContainer.innerHTML = '';
                    const remainingPosts = displayList.slice(4);
                    remainingPosts.forEach(post => {
                        listContainer.innerHTML += `
                            <div class="article-item">
                                <img src="${post.image}" alt="${post.title}" style="width:120px; height:80px; object-fit:cover; float:left; margin-right:15px; border-radius:4px;">
                                <h4 style="margin:0 0 5px 0"><a href="post.html?id=${post.id}" style="text-decoration:none; color:#333;">${post.title}</a></h4>
                                <p style="font-size:14px; color:#666; margin:0;">${post.excerpt.substring(0, 100)}...</p>
                                <div style="clear:both"></div>
                            </div>
                            <hr style="border:0; border-top:1px solid #eee; margin:15px 0;">
                        `;
                    });
                }
            }

            // --- 5. RENDER CATEGORY GRID (M·ªöI TH√äM) ---
            const catGrid = document.getElementById('categoryGrid');
            if (catGrid) {
                // Danh s√°ch chuy√™n m·ª•c mu·ªën hi·ªÉn th·ªã
                const categoriesToShow = ['Du l·ªãch', '·∫®m th·ª±c', 'VƒÉn h√≥a', 'Gi·∫£i tr√≠']; 
                catGrid.innerHTML = ''; 

                categoriesToShow.forEach(catName => {
                    // T√¨m ·∫£nh ƒë·∫°i di·ªán t·ª´ fullList (D·ªØ li·ªáu g·ªëc) ƒë·ªÉ l√∫c n√†o c≈©ng c√≥ ·∫£nh
                    const foundPost = fullList.find(p => p.category && normalize(p.category) === normalize(catName));
                    const bgImage = foundPost ? foundPost.image : 'https://placehold.co/300x300/eee/333?text=' + catName;
                    
                    const html = `
                        <a href="index.html?cat=${catName.toLowerCase()}" class="cat-box">
                            <img src="${bgImage}" alt="${catName}">
                            <div class="cat-overlay">
                                <h3>${catName}</h3>
                            </div>
                        </a>
                    `;
                    catGrid.innerHTML += html;
                });
            }
        });
    </script>
    <script src="data.js"></script>
    <script src="scripts.js"></script>
</body>
</html>