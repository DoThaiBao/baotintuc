<!doctype html>
<html lang="vi">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Chi ti·∫øt b√†i vi·∫øt</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* CSS Ri√™ng cho trang b√†i vi·∫øt chi ti·∫øt */
        .post-container {
            max-width: 800px; /* Gi·ªõi h·∫°n chi·ªÅu r·ªông ƒë·ªÉ d·ªÖ ƒë·ªçc */
            margin: 0 auto;
            background: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .post-header {
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
            padding-bottom: 20px;
        }

        .post-category {
            color: #d32f2f;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 14px;
            margin-bottom: 10px;
            display: inline-block;
        }

        .post-title {
            font-size: 32px;
            line-height: 1.3;
            margin: 10px 0;
            color: #333;
        }

        /* [QUAN TR·ªåNG] Ph·∫ßn hi·ªÉn th·ªã T√°c gi·∫£ & Ng√†y ƒëƒÉng */
        .post-meta {
            color: #777;
            font-size: 14px;
            font-style: italic;
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .post-meta strong {
            color: #333; /* T√™n t√°c gi·∫£ ƒë·∫≠m h∆°n ch√∫t */
            font-weight: 600;
        }

        /* ·∫¢nh ƒë·∫°i di·ªán b√†i vi·∫øt */
        .post-image {
            width: 100%;
            height: auto;
            border-radius: 8px;
            margin-bottom: 30px;
            display: block;
        }

        /* N·ªôi dung b√†i vi·∫øt */
        .post-content {
            font-size: 18px;
            line-height: 1.8;
            color: #222;
            text-align: justify;
        }

        .post-content p {
            margin-bottom: 20px;
        }

        /* N√∫t quay l·∫°i */
        .btn-back {
            display: inline-block;
            margin-top: 30px;
            padding: 10px 20px;
            background: #f0f0f0;
            color: #333;
            text-decoration: none;
            border-radius: 5px;
            transition: 0.3s;
            font-weight: bold;
        }
        .btn-back:hover {
            background: #ddd;
        }

        /* Sidebar b√™n c·∫°nh (n·∫øu mu·ªën) */
        .layout-post {
            display: flex;
            gap: 30px;
            margin-top: 30px;
        }
        @media(max-width: 768px) {
            .layout-post { flex-direction: column; }
            .post-title { font-size: 24px; }
        }
    </style>
</head>

<body>
    <header class="site-header">
        <div class="container">
            <div class="logo"><a href="index.html" style="text-decoration:none;">NH·ªäP S·ªêNG HU·∫æ</a></div>
        </div>
    </header>

    <div class="top-row">
        <nav class="category-bar">
            <div class="container">
                <a href="index.html">‚Üê V·ªÅ Trang Ch·ªß</a>
            </div>
        </nav>
    </div>

    <main class="container layout-post">
        <article class="post-container" style="flex: 2;">
            <div id="postDetail">
                <p>ƒêang t·∫£i d·ªØ li·ªáu...</p>
            </div>
            
            <a href="index.html" class="btn-back">‚Üê Quay l·∫°i danh s√°ch</a>
        </article>

        <aside class="sidebar" style="flex: 1;">
            <div class="widget">
                <h3>Tin c√πng chuy√™n m·ª•c</h3>
                <ul id="relatedNews" class="latest-list">
                    </ul>
            </div>
        </aside>
    </main>

    <footer class="site-footer">
        <div class="container">
           <p>NH·ªäP S·ªêNG HU·∫æ ONLINE</p>
            <p>üìç ƒê·ªãa ch·ªâ tr·ª• s·ªü c∆° quan ch·ªß qu·∫£n:</p>
            <p>üìû ƒêi·ªán tho·∫°i t√≤a so·∫°n: 0xxx.xxx.xxx</p>
            <p>üìß Email: nhipsonghue@gmail.com</p>
            <p>üåê Website: www.nhipsonghue.vn</p>
            <p>¬© 2025 Nh·ªãp S·ªëng Hu·∫ø.</p>   
            <p>ƒê√¢y l√† b√†i t·∫≠p minh h·ªça</p>
        </div>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // 1. L·∫•y ID t·ª´ URL (V√≠ d·ª•: post.html?id=8)
            const urlParams = new URLSearchParams(window.location.search);
            const postId = parseInt(urlParams.get('id'));

            // 2. L·∫•y d·ªØ li·ªáu t·ª´ LocalStorage (ho·∫∑c data.js)
            let fullList = [];
            try {
                const local = JSON.parse(localStorage.getItem('articles') || '[]');
                if (Array.isArray(local) && local.length > 0) fullList = local;
            } catch (e) {}

            // N·∫øu LocalStorage tr·ªëng, th·ª≠ l·∫•y t·ª´ bi·∫øn to√†n c·ª•c (n·∫øu load file data.js)
            if (fullList.length === 0 && typeof SAMPLE_ARTICLES !== 'undefined') {
                fullList = SAMPLE_ARTICLES;
            }

            // 3. T√¨m b√†i vi·∫øt theo ID
            const post = fullList.find(p => p.id === postId);

            const container = document.getElementById('postDetail');

            if (!post) {
                container.innerHTML = "<h2>Kh√¥ng t√¨m th·∫•y b√†i vi·∫øt!</h2><p>C√≥ th·ªÉ b√†i vi·∫øt ƒë√£ b·ªã x√≥a ho·∫∑c ƒë∆∞·ªùng d·∫´n kh√¥ng ƒë√∫ng.</p>";
                return;
            }

            // 4. HI·ªÇN TH·ªä CHI TI·∫æT B√ÄI VI·∫æT (C√≥ m·ª•c T√°c gi·∫£)
            document.title = post.title + " - Nh·ªãp S·ªëng Hu·∫ø"; // Thay ƒë·ªïi ti√™u ƒë·ªÅ tab tr√¨nh duy·ªát

            container.innerHTML = `
                <header class="post-header">
                    <span class="post-category">${post.category}</span>
                    <h1 class="post-title">${post.title}</h1>
                    
                    <div class="post-meta">
                        <span>‚úçÔ∏è T√°c gi·∫£: <strong>${post.author || 'Ban Bi√™n T·∫≠p'}</strong></span>
                        <span>üìÖ ${post.date}</span>
                    </div>
                </header>

                <img src="${post.image}" alt="${post.title}" class="post-image">

                <div class="post-content">
                    <p style="font-weight:bold; font-style:italic;">${post.excerpt}</p>
                    ${post.content} </div>
            `;

            // 5. HI·ªÇN TH·ªä TIN LI√äN QUAN (C√πng category)
            const relatedContainer = document.getElementById('relatedNews');
            if (relatedContainer) {
                // L·ªçc tin c√πng chuy√™n m·ª•c nh∆∞ng KH√ÅC tin ƒëang xem
                const related = fullList
                    .filter(p => p.category === post.category && p.id !== post.id)
                    .slice(0, 5); // L·∫•y t·ªëi ƒëa 5 tin

                if (related.length > 0) {
                    related.forEach(p => {
                        relatedContainer.innerHTML += `
                            <li style="margin-bottom:15px; border-bottom:1px dashed #ddd; padding-bottom:10px; list-style:none;">
                                <a href="post.html?id=${p.id}" style="text-decoration:none; color:#333; display:flex; gap:10px;">
                                    <img src="${p.image}" style="width:60px; height:60px; object-fit:cover; border-radius:4px;">
                                    <div>
                                        <h5 style="margin:0; font-size:14px;">${p.title}</h5>
                                    </div>
                                </a>
                            </li>
                        `;
                    });
                } else {
                    relatedContainer.innerHTML = "<p>Kh√¥ng c√≥ tin c√πng chuy√™n m·ª•c.</p>";
                }
            }
        });
    </script>
    
    <script src="data.js"></script>
</body>
</html>